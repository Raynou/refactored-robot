define("block_simplecamera/camera",["exports"],(function(_exports){function save_image(video,canvas,title,userId,url){canvas.getContext("2d").drawImage(video,0,0,canvas.width,canvas.height);const date=new Date,time="".concat(date.getHours(),":").concat((minutes=>{const stringMinutes=minutes.toString();return 1==stringMinutes.length?"0"+stringMinutes:stringMinutes})(date.getMinutes())),mockBody={photo:canvas.toDataURL(),page:title,userId:userId,time:time};console.log(mockBody),fetch(url,{method:"POST",mode:"no-cors",headers:{"Content-type":"application/json"},body:JSON.stringify(mockBody)})}function getFromLocalStorage(){return parseInt(localStorage.getItem("timeTranscurred"))}function pushToLocalStorage(seconds){localStorage.setItem("timeTranscurred",seconds.toString())}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0;_exports.init=(timer,title,id,url)=>{let video=document.querySelector("#camera"),canvas=document.querySelector("#canvas"),save_button=document.querySelector("#save_button");navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then((stream=>{video.srcObject=stream,video.play()})).catch((error=>window.alert(error))),save_button.addEventListener("click",(function(){save_image(video,canvas)})),(null===getFromLocalStorage()||isNaN(getFromLocalStorage()))&&pushToLocalStorage(0),setInterval((()=>{if(getFromLocalStorage()===timer/1e3)save_image(video,canvas,title,id,url),pushToLocalStorage(0);else{pushToLocalStorage(getFromLocalStorage()+1)}}),1e3)}}));

//# sourceMappingURL=camera.min.js.map