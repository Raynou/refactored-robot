define("block_simplecamera/camera",["exports"],(function(_exports){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0;const saveImage=(video,canvas,title,userId)=>{canvas.getContext("2d").drawImage(video,0,0,canvas.width,canvas.height);const date=new Date,time="".concat(date.getHours(),":").concat((minutes=>{const stringMinutes=minutes.toString();return 1===stringMinutes.length?"0"+stringMinutes:stringMinutes})(date.getMinutes())),body={photo:canvas.toDataURL(),page:title,userId:userId,time:time};fetch("/moodle/blocks/simplecamera/api.php",{method:"POST",mode:"no-cors",headers:{"Content-type":"application/json"},body:JSON.stringify(body)})},getFromLocalStorage=()=>parseInt(localStorage.getItem("timeTranscurred")),pushToLocalStorage=seconds=>{localStorage.setItem("timeTranscurred",seconds.toString())};_exports.init=(timer,title,id)=>{let video=document.querySelector("#camera"),canvas=document.querySelector("#canvas"),saveButton=document.querySelector("#save_button");navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then((stream=>{video.srcObject=stream,video.play()})).catch((error=>window.alert(error))),saveButton.addEventListener("click",(()=>{saveImage(video,canvas)})),(null===getFromLocalStorage()||isNaN(getFromLocalStorage()))&&pushToLocalStorage(0),setInterval((()=>{getFromLocalStorage()===timer/1e3?(saveImage(video,canvas,title,id),pushToLocalStorage(0)):pushToLocalStorage(getFromLocalStorage()+1)}),1e3)}}));

//# sourceMappingURL=camera.min.js.map